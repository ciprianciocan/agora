(function(){var e={467:function(e,r,o){"use strict";var t=o(3751),n=o(641);const c={id:"app"};function l(e,r,o,t,l,s){const a=(0,n.g2)("RssFeed");return(0,n.uX)(),(0,n.CE)("div",c,[r[0]||(r[0]=(0,n.Lk)("h1",null,"AgorA",-1)),(0,n.bF)(a)])}var s=o(33);const a={key:0},i={class:"feed-container"},u={key:0},d={key:1,class:"error"},g={key:2,class:"feed"};function p(e,r,o,t,c,l){const p=(0,n.g2)("SourceSelector"),f=(0,n.g2)("ArticleCard");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(p,{sources:c.allSources,onFilterApplied:l.filterSources},null,8,["sources","onFilterApplied"]),c.debugMode?((0,n.uX)(),(0,n.CE)("div",a,[(0,n.Lk)("button",{onClick:r[0]||(r[0]=(...e)=>l.checkLocalStorage&&l.checkLocalStorage(...e))},"Check Local Storage"),(0,n.Lk)("button",{onClick:r[1]||(r[1]=(...e)=>l.clearLocalStorage&&l.clearLocalStorage(...e))},"Clear Local Storage")])):(0,n.Q3)("",!0),(0,n.Lk)("div",i,[c.loading?((0,n.uX)(),(0,n.CE)("div",u,"Loading...")):(0,n.Q3)("",!0),c.error?((0,n.uX)(),(0,n.CE)("div",d,(0,s.v_)(c.error),1)):(0,n.Q3)("",!0),c.loading||c.error?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("ul",g,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(c.articles,(e=>((0,n.uX)(),(0,n.Wv)(f,{key:e.link,article:e},null,8,["article"])))),128))]))])])}o(8992),o(4520),o(1454);const f={key:0,class:"dropdown"},h=["value"];function S(e,r,o,c,l,a){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("button",{onClick:r[0]||(r[0]=(...e)=>a.toggleDropdown&&a.toggleDropdown(...e)),class:"menu-button"},"â˜°"),l.dropdownVisible?((0,n.uX)(),(0,n.CE)("div",f,[r[3]||(r[3]=(0,n.Lk)("h3",null,"Select Sources",-1)),(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.sources,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.id},[(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":r[1]||(r[1]=e=>l.selectedSources=e)},null,8,h),[[t.lH,l.selectedSources]]),(0,n.eW)(" "+(0,s.v_)(e.name),1)])])))),128))]),(0,n.Lk)("button",{onClick:r[2]||(r[2]=(...e)=>a.applyFilter&&a.applyFilter(...e))},"Filter")])):(0,n.Q3)("",!0)])}function m(e,r){localStorage.setItem(e,JSON.stringify(r))}function v(e,r=[]){const o=localStorage.getItem(e);return o?JSON.parse(o):r}var k={name:"SourceSelector",props:{sources:{type:Array,required:!0}},data(){return{dropdownVisible:!1,selectedSources:v("selectedSources",[])}},methods:{toggleDropdown(){this.dropdownVisible=!this.dropdownVisible},applyFilter(){console.log("Saving selected sources:",this.selectedSources),m("selectedSources",this.selectedSources),this.$emit("filterApplied",this.selectedSources),this.dropdownVisible=!1}}},y=o(6262);const b=(0,y.A)(k,[["render",S],["__scopeId","data-v-4a78b7a5"]]);var w=b;const L={class:"article"},_=["href"],C=["src"],E={class:"article-meta"},A={class:"source-tag"},F={class:"publication-date"},O={class:"article-description"};function X(e,r,o,t,c,l){return(0,n.uX)(),(0,n.CE)("li",L,[(0,n.Lk)("a",{href:o.article.link,target:"_blank",class:"title-and-image-link"},[o.article.image?((0,n.uX)(),(0,n.CE)("img",{key:0,src:o.article.image,alt:"Article Image",class:"article-image"},null,8,C)):(0,n.Q3)("",!0),(0,n.Lk)("h3",null,(0,s.v_)(o.article.title),1)],8,_),(0,n.Lk)("div",E,[(0,n.Lk)("span",A,(0,s.v_)(o.article.source),1),(0,n.Lk)("span",F,(0,s.v_)(o.article.date),1)]),(0,n.Lk)("p",O,(0,s.v_)(o.article.description),1)])}var x={name:"ArticleCard",props:{article:{type:Object,required:!0}}};const R=(0,y.A)(x,[["render",X],["__scopeId","data-v-217c47ad"]]);var U=R,P=o(4229),j=o.n(P);const I=new(j());async function V(e){try{const r=await fetch(e),o=await r.json();return console.log("Fetched sources:",o.sources),o.sources}catch(r){throw console.error("Error fetching RSS sources:",r),r}}async function D(e,r){try{const o=e?`${e}${r.rss_feed_url.trim()}`:r.rss_feed_url.trim();console.log("Fetching RSS feed from:",o);const t=await fetch(o),n=await t.text(),c=await I.parseString(n);return c.items.map((e=>{console.log("Raw item:",e);const o=e.content||e.description||"",t=o?.replace(/<!\[CDATA\[|\]\]>/g,"")?.trim(),n=t?.match(/<img.*?src="(.*?)"/)?.[1]||"",c=e.enclosure?.url||e["media:content"]?.url||n,l=t?.match(/<p>(.*?)<\/p>/)?.[1]||"";return console.log("Cleaned description:",l),console.log("Extracted image:",c),{title:e.title||"",link:e.link||"",description:l||"",image:c,source:r.name||"Unknown",date:e.isoDate||e.pubDate||"Unknown"}}))}catch(o){throw console.error("Error fetching RSS feed:",o),o}}console.log("VUE_APP_USE_PROXY:","1"),console.log("VUE_APP_PROXY_URL:","https://agora-backend-arn2.onrender.com/rss?url="),console.log("NODE_ENV:","production");var Q={name:"RssFeed",components:{SourceSelector:w,ArticleCard:U},data(){return{allSources:[],selectedSources:v("selectedSources",[]),articles:[],loading:!0,error:null,proxyUrl:"https://agora-backend-arn2.onrender.com/rss?url=",debugMode:!1}},async mounted(){const e=v("selectedSources",[]),r="/agora/rss_sources.json";console.log("Retrieved selected sources from storage:",e),console.log("Proxy URL in mounted:",this.proxyUrl),this.selectedSources=e.length?e:this.allSources.map((e=>e.id));try{this.allSources=await V(r),console.log("All sources:",this.allSources);const e=this.allSources.map((e=>e.id));this.filterSources(this.selectedSources.length?this.selectedSources:e)}catch(o){console.error("Error loading sources:",o),this.error="Failed to load sources. Please try again later."}},methods:{async filterSources(e){console.log("Proxy URL in filterSources:",this.proxyUrl),this.loading=!0,this.error=null,this.articles=[];try{const r=this.allSources.filter((r=>e.includes(r.id)));for(const e of r){const r=await D(this.proxyUrl,e);this.articles=[...this.articles,...r.slice(0,3)]}}catch(r){console.error("Error filtering sources:",r),this.error="Failed to load articles. Please try again later."}finally{this.loading=!1}},checkLocalStorage(){const e=localStorage.getItem("selectedSources");alert(`Selected Sources: ${e}`)},clearLocalStorage(){localStorage.removeItem("selectedSources"),alert("Local storage cleared!")}}};const N=(0,y.A)(Q,[["render",p]]);var $=N,M={name:"App",components:{RssFeed:$}};const T=(0,y.A)(M,[["render",l]]);var q=T;(0,t.Ef)(q).mount("#app")},2634:function(){},5340:function(){},9838:function(){}},r={};function o(t){var n=r[t];if(void 0!==n)return n.exports;var c=r[t]={id:t,loaded:!1,exports:{}};return e[t].call(c.exports,c,c.exports,o),c.loaded=!0,c.exports}o.m=e,function(){var e=[];o.O=function(r,t,n,c){if(!t){var l=1/0;for(u=0;u<e.length;u++){t=e[u][0],n=e[u][1],c=e[u][2];for(var s=!0,a=0;a<t.length;a++)(!1&c||l>=c)&&Object.keys(o.O).every((function(e){return o.O[e](t[a])}))?t.splice(a--,1):(s=!1,c<l&&(l=c));if(s){e.splice(u--,1);var i=n();void 0!==i&&(r=i)}}return r}c=c||0;for(var u=e.length;u>0&&e[u-1][2]>c;u--)e[u]=e[u-1];e[u]=[t,n,c]}}(),function(){o.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(r,{a:r}),r}}(),function(){o.d=function(e,r){for(var t in r)o.o(r,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};o.O.j=function(r){return 0===e[r]};var r=function(r,t){var n,c,l=t[0],s=t[1],a=t[2],i=0;if(l.some((function(r){return 0!==e[r]}))){for(n in s)o.o(s,n)&&(o.m[n]=s[n]);if(a)var u=a(o)}for(r&&r(t);i<l.length;i++)c=l[i],o.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return o.O(u)},t=self["webpackChunkrss_aggregator_poc"]=self["webpackChunkrss_aggregator_poc"]||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))}();var t=o.O(void 0,[504],(function(){return o(467)}));t=o.O(t)})();
//# sourceMappingURL=app.d747904a.js.map