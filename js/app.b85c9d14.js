(function(){var e={601:function(e,r,t){"use strict";var o=t(3751),c=t(641);const n={id:"app"};function l(e,r,t,o,l,s){const i=(0,c.g2)("RssFeed");return(0,c.uX)(),(0,c.CE)("div",n,[r[0]||(r[0]=(0,c.Lk)("h1",null,"AgorA",-1)),(0,c.bF)(i)])}var s=t(33);const i={key:0},a={class:"feed-container"},u={key:0},d={key:1,class:"error"},g={key:2,class:"feed"};function p(e,r,t,o,n,l){const p=(0,c.g2)("SourceSelector"),f=(0,c.g2)("ArticleCard");return(0,c.uX)(),(0,c.CE)("div",null,[(0,c.bF)(p,{sources:n.allSources,onFilterApplied:l.filterSources},null,8,["sources","onFilterApplied"]),n.debugMode?((0,c.uX)(),(0,c.CE)("div",i,[(0,c.Lk)("button",{onClick:r[0]||(r[0]=(...e)=>l.checkLocalStorage&&l.checkLocalStorage(...e))},"Check Local Storage"),(0,c.Lk)("button",{onClick:r[1]||(r[1]=(...e)=>l.clearLocalStorage&&l.clearLocalStorage(...e))},"Clear Local Storage")])):(0,c.Q3)("",!0),(0,c.Lk)("div",a,[n.loading?((0,c.uX)(),(0,c.CE)("div",u,"Loading...")):(0,c.Q3)("",!0),n.error?((0,c.uX)(),(0,c.CE)("div",d,(0,s.v_)(n.error),1)):(0,c.Q3)("",!0),n.loading||n.error?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)("ul",g,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(n.articles,(e=>((0,c.uX)(),(0,c.Wv)(f,{key:e.link,article:e},null,8,["article"])))),128))]))])])}t(8992),t(4520),t(1454);const f={key:0,class:"dropdown"},h=["value"];function S(e,r,t,n,l,i){return(0,c.uX)(),(0,c.CE)("div",null,[(0,c.Lk)("button",{onClick:r[0]||(r[0]=(...e)=>i.toggleDropdown&&i.toggleDropdown(...e)),class:"menu-button"},"â˜°"),l.dropdownVisible?((0,c.uX)(),(0,c.CE)("div",f,[r[3]||(r[3]=(0,c.Lk)("h3",null,"Select Sources",-1)),(0,c.Lk)("ul",null,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(t.sources,(e=>((0,c.uX)(),(0,c.CE)("li",{key:e.id},[(0,c.Lk)("label",null,[(0,c.bo)((0,c.Lk)("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":r[1]||(r[1]=e=>l.selectedSources=e)},null,8,h),[[o.lH,l.selectedSources]]),(0,c.eW)(" "+(0,s.v_)(e.name),1)])])))),128))]),(0,c.Lk)("button",{onClick:r[2]||(r[2]=(...e)=>i.applyFilter&&i.applyFilter(...e))},"Filter")])):(0,c.Q3)("",!0)])}function v(e,r){localStorage.setItem(e,JSON.stringify(r))}function m(e,r=[]){const t=localStorage.getItem(e);return t?JSON.parse(t):r}var k={name:"SourceSelector",props:{sources:{type:Array,required:!0}},data(){return{dropdownVisible:!1,selectedSources:m("selectedSources",[])}},methods:{toggleDropdown(){this.dropdownVisible=!this.dropdownVisible},applyFilter(){console.log("Saving selected sources:",this.selectedSources),v("selectedSources",this.selectedSources),this.$emit("filterApplied",this.selectedSources),this.dropdownVisible=!1}}},y=t(6262);const b=(0,y.A)(k,[["render",S],["__scopeId","data-v-4a78b7a5"]]);var w=b;const _={class:"article"},L=["href"],C=["src"],E={class:"article-meta"},A={class:"source-tag"},F={class:"publication-date"},O={class:"article-description"};function X(e,r,t,o,n,l){return(0,c.uX)(),(0,c.CE)("li",_,[(0,c.Lk)("a",{href:t.article.link,target:"_blank",class:"title-and-image-link"},[t.article.image?((0,c.uX)(),(0,c.CE)("img",{key:0,src:t.article.image,alt:"Article Image",class:"article-image"},null,8,C)):(0,c.Q3)("",!0),(0,c.Lk)("h3",null,(0,s.v_)(t.article.title),1)],8,L),(0,c.Lk)("div",E,[(0,c.Lk)("span",A,(0,s.v_)(t.article.source),1),(0,c.Lk)("span",F,(0,s.v_)(t.article.date),1)]),(0,c.Lk)("p",O,(0,s.v_)(t.article.description),1)])}var R={name:"ArticleCard",props:{article:{type:Object,required:!0}}};const P=(0,y.A)(R,[["render",X],["__scopeId","data-v-217c47ad"]]);var j=P,x=t(4229),I=t.n(x);const U=new(I());async function V(e){try{const r=await fetch(e),t=await r.json();return console.log("Fetched sources:",t.sources),t.sources}catch(r){throw console.error("Error fetching RSS sources:",r),r}}async function D(e,r){try{const t=e?`${e}${r.rss_feed_url.trim()}`:r.rss_feed_url.trim();console.log("Fetching RSS feed from:",t);const o=await fetch(t),c=await o.text(),n=await U.parseString(c);return n.items.map((e=>{console.log("Raw item:",e);const t=e.content||e.description||"",o=t?.replace(/<!\[CDATA\[|\]\]>/g,"")?.trim(),c=o?.match(/<img.*?src="(.*?)"/)?.[1]||"",n=e.enclosure?.url||e["media:content"]?.url||c,l=o?.match(/<p>(.*?)<\/p>/)?.[1]||"";return console.log("Cleaned description:",l),console.log("Extracted image:",n),{title:e.title||"",link:e.link||"",description:l||"",image:n,source:r.name||"Unknown",date:e.isoDate||e.pubDate||"Unknown"}}))}catch(t){throw console.error("Error fetching RSS feed:",t),t}}console.log("VUE_APP_USE_PROXY:","0"),console.log("VUE_APP_PROXY_URL:","");var Q={name:"RssFeed",components:{SourceSelector:w,ArticleCard:j},data(){return{allSources:[],selectedSources:m("selectedSources",[]),articles:[],loading:!0,error:null,proxyUrl:"",debugMode:!1}},async mounted(){const e=m("selectedSources",[]),r="/agora/rss_sources.json";console.log("Retrieved selected sources from storage:",e),this.selectedSources=e.length?e:this.allSources.map((e=>e.id));try{this.allSources=await V(r),console.log("All sources:",this.allSources);const e=this.allSources.map((e=>e.id));this.filterSources(this.selectedSources.length?this.selectedSources:e)}catch(t){console.error("Error loading sources:",t),this.error="Failed to load sources. Please try again later."}},methods:{async filterSources(e){this.loading=!0,this.error=null,this.articles=[];try{const r=this.allSources.filter((r=>e.includes(r.id)));for(const e of r){const r=await D("http://192.168.0.105:8081/",e);this.articles=[...this.articles,...r.slice(0,3)]}}catch(r){console.error("Error filtering sources:",r),this.error="Failed to load articles. Please try again later."}finally{this.loading=!1}},checkLocalStorage(){const e=localStorage.getItem("selectedSources");alert(`Selected Sources: ${e}`)},clearLocalStorage(){localStorage.removeItem("selectedSources"),alert("Local storage cleared!")}}};const $=(0,y.A)(Q,[["render",p]]);var M=$,T={name:"App",components:{RssFeed:M}};const q=(0,y.A)(T,[["render",l]]);var J=q;(0,o.Ef)(J).mount("#app")},2634:function(){},5340:function(){},9838:function(){}},r={};function t(o){var c=r[o];if(void 0!==c)return c.exports;var n=r[o]={id:o,loaded:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}t.m=e,function(){var e=[];t.O=function(r,o,c,n){if(!o){var l=1/0;for(u=0;u<e.length;u++){o=e[u][0],c=e[u][1],n=e[u][2];for(var s=!0,i=0;i<o.length;i++)(!1&n||l>=n)&&Object.keys(t.O).every((function(e){return t.O[e](o[i])}))?o.splice(i--,1):(s=!1,n<l&&(l=n));if(s){e.splice(u--,1);var a=c();void 0!==a&&(r=a)}}return r}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[o,c,n]}}(),function(){t.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(r,{a:r}),r}}(),function(){t.d=function(e,r){for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};t.O.j=function(r){return 0===e[r]};var r=function(r,o){var c,n,l=o[0],s=o[1],i=o[2],a=0;if(l.some((function(r){return 0!==e[r]}))){for(c in s)t.o(s,c)&&(t.m[c]=s[c]);if(i)var u=i(t)}for(r&&r(o);a<l.length;a++)n=l[a],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(u)},o=self["webpackChunkrss_aggregator_poc"]=self["webpackChunkrss_aggregator_poc"]||[];o.forEach(r.bind(null,0)),o.push=r.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(601)}));o=t.O(o)})();
//# sourceMappingURL=app.b85c9d14.js.map